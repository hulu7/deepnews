//$.oPageLoader()
define(function(g,k,l){var b=jQuery=g("jquery");b.ownage||(b.ownage={});b.ownage.Loader=function(e,c,d,g){var a=this;a.el=e;a.$el=b(e);a.selector=d;a.context=a.$el;a.checkInterval=!1;b.ownage.Loader.objects||(b.ownage.Loader.objects=[],b.ownage.Loader.objectOptions=[]);a.objects=b.ownage.Loader.objects;var h;a.setObject=function(){a.objects.push(a.selector);a.objectIndex=a.getObjectIndex();h=b.ownage.Loader.objectOptions[a.objectIndex];a.params=h;a.overlaySel="oloader_overlay_"+a.objectIndex;a.canvasSel=
"oloader_canvas_"+a.objectIndex;a.loaderSel="oloader_loader_"+a.objectIndex;a.isSet=!0};a.init=function(){a.setObject();if("string"===typeof c)switch(c){case "preloadImages":a.preloadImages();break;case "show":a.show();break;case "hide":a.hide();break;case "adjust":a.adjustLoader()}else b.ownage.Loader.objectOptions[a.objectIndex]={},b.extend(b.ownage.Loader.objectOptions[a.objectIndex],b.ownage.Loader.defaultOptions,c),a.params=b.ownage.Loader.objectOptions[a.objectIndex],!0===a.params.showOnInit&&
a.show()};a.executeOnStart=function(){if("function"===typeof a.params.onStart)a.params.onStart()};a.getObjectIndex=function(){for(var b=0;b<a.objects.length;b++)if(a.selector===a.objects[b])return b+"_"+g};a.removeCanvas=function(){b("#"+a.canvasSel).remove()};a.adjustLoader=function(){var c=a.context.offset(),f=a.context.outerWidth(!0),d=a.context.outerHeight(!0);0==b(a.selector).length&&a.removeCanvas();if(c.left!=a.lastPosLeft||c.top!=a.lastPosTop||f!=a.lastWidth||d!=a.lastHeight||a.lastLoaderWidth!=
b("#"+a.loaderSel).outerWidth()){var e="absolute";a.params.wholeWindow&&(f=b(window).width(),d=b(window).height(),c={left:0,top:0},e="fixed");a.lastPosLeft=c.left;a.lastPosTop=c.top;a.lastWidth=f;a.lastHeight=d;a.lastLoaderWidth=b("#"+a.loaderSel).outerWidth();b("#"+a.overlaySel).css({position:e,left:"0px",top:"0px",width:f,height:d});b("#"+a.canvasSel).css({position:e,left:c.left+"px",top:c.top+"px",width:f,height:d,zIndex:100});b("#"+a.loaderSel).css({position:e,left:"50%",top:"50%",marginLeft:-parseInt(b("#"+
a.loaderSel).outerWidth()/2),marginTop:-parseInt(b("#"+a.loaderSel).outerHeight()/2)})}};a.setCheckInterval=function(){b("#"+a.overlaySel).css({background:a.params.backgroundColor});a.checkInterval=setInterval(function(){a.adjustLoader()},a.params.checkIntervalTime)};a.show=function(){0<b("#"+a.canvasSel).length||a.context.parent().hasClass("oloader_canvas")||a.context.hasClass("oloader_canvas")||(b("body").append("<div id='"+a.canvasSel+"' class='oloader_canvas' style='padding:0px;margin:0px;display:none;overflow:hidden'></div>"),
a.params.modal&&(b("#"+a.canvasSel).append("<div id='"+a.overlaySel+"'></div>"),b("#"+a.overlaySel).hide().fadeTo(0,a.params.fadeLevel)),a.params.showLoader&&b("#"+a.canvasSel).append(a.setStyle()),b("#"+a.canvasSel).hide().fadeTo(a.params.fadeInTime,1),a.lockOverflow(),a.setCheckInterval(),a.executeOnStart(),a.adjustLoader(),a.executeEffect(1),0!==a.params.hideAfter&&setTimeout(function(){a.hide()},a.params.hideAfter),a.params.waitLoad&&a.context.load(function(){a.hide()}),!1!==a.params.url&&b.ajax({url:a.params.url,
type:a.params.type,data:a.params.data,success:function(b){a.params.successData=b;a.params.hideAfter||(a.params.updateOnComplete||a.updateContent(),a.hide())},error:function(b,c,d){if("function"==typeof a.params.onError)a.params.onError(b,c,d)}}))};a.hide=function(){var c=!1;a.executeEffect(!1);b("#"+a.canvasSel).fadeTo(a.params.fadeOutTime,0,function(){c||(c=!0,sucData="undefined","function"===typeof a.params.complete&&(a.params.successData&&(sucData=a.params.successData),a.params.complete(sucData)),
a.params.updateOnComplete&&a.updateContent());clearInterval(a.checkInterval);b(this).remove();a.lockOverflow(!0)})};a.updateContent=function(){sucData="Load failed.";a.params.successData&&(sucData=a.params.successData);a.params.updateContent&&!1!==a.params.url&&a.context.html(sucData);a.adjustLoader()};a.lockOverflow=function(c){a.params.lockOverflow&&(c?b(a.params.context).css("overflow","auto"):b(a.params.context).css("overflow","hidden"))};a.setStyle=function(){var b="";if("string"===typeof a.params.style)return"<div id='"+
a.loaderSel+"' style='position:absolute;left:0;top:0;width:100%;height:100%;'>"+a.params.style+"</div>";switch(a.params.style){case 4:b="<img src='"+a.params.image+"' id='"+a.loaderSel+"' style='box-shadow:0px 0px 20px #000;position:absolute;padding:"+a.params.imagePadding+"px;background:"+a.params.imageBgColor+"' alt='Loading...' />";break;case 3:b="<img src='"+a.params.image+"' id='"+a.loaderSel+"' style='box-shadow:0px 0px 20px #222;border-radius:1000px;position:absolute;padding:"+a.params.imagePadding+
"px;background:"+a.params.imageBgColor+"' alt='Loading...' />";break;case 2:b="<div id='"+a.loaderSel+"' style='position:absolute;width:100%;padding-top:10px;padding-bottom:10px;";b+="text-align:center;background-color:"+a.params.imageBgColor+"'><img src='"+a.params.image+"' alt='Loading...' /></div>";break;case 0:b="<img src='"+a.params.image+"' id='"+a.loaderSel+"' style='position:absolute' alt='Loading...' />";break;default:b="<img src='"+a.params.image+"' id='"+a.loaderSel+"' style='box-shadow:1px 1px #000;border-radius:1000px;position:absolute;padding:"+
a.params.imagePadding+"px;background:"+a.params.imageBgColor+"' alt='Loading...' />"}return b};a.executeEffect=function(c){switch(a.params.effect){case "doornslide":case "door":var d="oloader_effect_door_"+a.objectIndex;myData={backgroundColor:a.params.backgroundColor,fadeLevel:a.params.fadeLevel};a.params.effectData&&(myData=a.params.effectData);c?(b("#"+a.overlaySel).after("<div id='"+d+"'></div>"),b("#"+d).css({position:"absolute",overflow:"hidden",top:"50%",left:"0px",width:"100%",height:"0px",
marginTop:"0px","box-shadow":"0px 0px 25px "+myData.backgroundColor,background:myData.backgroundColor,opacity:0}).animate({height:"150px",marginTop:"-75px",opacity:myData.fadeLevel},a.params.fadeInTime+250,"easeOutBounce")):b("#"+d).animate({height:"0px",marginTop:"0px"},a.params.fadeOutTime+250,"easeOutBounce");if("doornslide"!==a.params.effect)break;case "slide":d=b("#"+a.overlaySel).css("left"),c?b("#"+a.overlaySel).css("left",-b("#"+a.overlaySel).width()):d=b("#"+a.overlaySel).width(),b("#"+a.overlaySel).animate({left:d},
c?a.params.fadeInTime:a.params.fadeOutTime)}};a.preloadImages=function(){for(var a="images/ownageLoader/loader1.gif images/ownageLoader/loader2.gif images/ownageLoader/loader3.gif images/ownageLoader/loader4.gif images/ownageLoader/loader5.gif images/ownageLoader/loader6.gif images/ownageLoader/loader7.gif".split(" "),c="",d=0;d<a.length;d++)c+="<img src='"+a[d]+"' alt='Loading...' />";b("body").append("<div class='oloader_image_preload' style='position:absolute;left:-5000px;top:-5000px;'>"+c+"</div>");
b(".oloader_image_preload").hide()};a.init()};b.ownage.Loader.defaultOptions={image:"images/ownageLoader/loader1.gif",style:1,context:"body",modal:!0,fadeInTime:300,fadeOutTime:300,fadeLevel:.7,backgroundColor:"#000",imageBgColor:"#fff",imagePadding:"10",showOnInit:!0,hideAfter:0,url:!1,type:"GET",data:!1,updateContent:!0,updateOnComplete:!0,showLoader:!0,effect:"",wholeWindow:!1,lockOverflow:!1,waitLoad:!1,checkIntervalTime:100,complete:"",onStart:"",onError:""};b.fn.oLoader=function(e){var c=this.selector,
d=0;return this.each(function(){d++;new b.ownage.Loader(this,e,c,d)})};b.ownage.PageLoader=function(e){var c=this;c.options={};b.extend(c.options,b.ownage.PageLoader.defaultOptions,e);c.init=function(){c.additionalImages();c.done=!1;c.loaded=0;c.total=b(c.options.affectedElements).length;0!=c.total&&(c.options.lockOverflow&&b(c.options.context).css("overflow","hidden"),b(c.options.context).oLoader({wholeWindow:c.options.wholeWindow,backgroundColor:c.options.backgroundColor,fadeInTime:0,fadeOutTime:c.options.fadeOutTime,
fadeLevel:c.options.fadeLevel,style:c.options.style,complete:c.options.complete}),c.options.ownStyle||(b("#ownage_page_loader_text").css({position:"absolute",display:c.options.showPercentage?"block":"none",left:"50%",top:"50%",color:c.options.percentageColor,fontSize:c.options.percentageFontSize,zIndex:"1000"}).css({marginTop:-(c.options.progressBarHeight/2)-b("#ownage_page_loader_text").height()}),b("#ownage_page_loader").css({position:"absolute",top:"50%",left:"0px",background:c.options.progressBarColor,
height:c.options.progressBarHeight,marginTop:-(c.options.progressBarHeight/2)})),b("#ownage_page_loader").fadeTo(0,c.options.progressBarFadeLevel),b(c.options.affectedElements).load(function(){!1===c.done&&(c.loaded++,c.updateProgressBar())}),b(window).load(function(){c.done=!0;c.loaded=c.total;"function"==typeof c.options.completeLoad&&c.options.completeLoad();c.updateProgressBar()}))};c.additionalImages=function(){if(0!=c.options.images.length)for(b("body").append("<div style='position:absolute;left:-10000px;top:-10000px;display:none;' id='ownage_page_loader_addImages'></div>"),
i=0;i<c.options.images.length;i++)b("#ownage_page_loader_addImages").append("<img src='"+c.options.images[i]+"' />")};c.updateProgressBar=function(){var d=parseInt(c.loaded/c.total*100);d!=c.lastPercentage&&(c.lastPercentage=d,b("#ownage_page_loader_text").html(d+"%"),c.options.ownStyle||b("#ownage_page_loader_text").css({marginLeft:-(b("#ownage_page_loader_text").width()/2)}),b("#ownage_page_loader").stop().animate({width:d+"%"},100),"function"==typeof c.options.update&&c.options.update({loaded:c.loaded,
total:c.total,percentage:d}),100===d&&setTimeout(function(){b(c.options.context).oLoader("hide");c.options.lockOverflow&&b(c.options.context).css("overflow","auto")},c.options.waitAfterEnd))};c.init()};b.ownage.PageLoader.defaultOptions={backgroundColor:"#000",progressBarColor:"#f00",progressBarHeight:3,progressBarFadeLevel:1,showPercentage:!0,percentageColor:"#fff",percentageFontSize:"30px",context:"body",affectedElements:"img,iframe,frame,script",ownStyle:!1,style:"<div id='ownage_page_loader_text'>0%</div><div id='ownage_page_loader'></div>",
lockOverflow:!0,images:[],wholeWindow:!0,fadeLevel:1,waitAfterEnd:0,fadeOutTime:500,complete:!1,completeLoad:!1,update:!1};b.oPageLoader=function(e){b.ownage.PageLoader(e)}});